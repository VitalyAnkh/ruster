(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52d2"],{"5b8b":function(e,s,t){"use strict";var a=t("d860"),r=t.n(a);r.a},"5f87":function(e,s,t){"use strict"},"6fff":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"usermessage"}},[t("div",{attrs:{id:"head"}},[t("div",{attrs:{id:"box"}},[t("img",{attrs:{src:e.hourse_user.avatar}}),t("div",{attrs:{id:"word"}},[e._v("In Rust - We Trust")])])]),t("div",{attrs:{id:"title"}},[t("ul",[t("li",[t("a",{attrs:{href:"/a/user/"+e.$route.params.id}},[e._v("主题")])]),t("li",[t("a",{attrs:{href:"/a/user/"+e.$route.params.id+"/comment"}},[e._v("评论")])]),t("li",[t("a",{attrs:{href:"/a/user/"+e.$route.params.id+"/save"}},[e._v("收藏")])]),0!=e.messages_count&&this.$route.params.id==e.signin_user.id?t("li",[t("a",{attrs:{href:"/a/user/"+e.$route.params.id+"/message",id:"message-title"}},[e._v("消息")]),e._v(" "),t("button",{attrs:{id:"readall"},on:{click:e.readall}},[e._v("全部阅读")])]):0==e.messages_count&&this.$route.params.id==e.signin_user.id?t("li",[t("a",{attrs:{href:"/a/user/"+e.$route.params.id+"/message",id:"message-title"}},[e._v("消息")])]):t("li",[t("a",{attrs:{href:"/a/user/"+e.$route.params.id+"/message",id:"message-title"}})])])]),t("main",[t("div",{attrs:{id:"container"}},[t("div",{attrs:{id:"center"}},e._l(e.messages,function(s,a){return t("div",{key:a,attrs:{id:"items"}},[t("div",{attrs:{id:"item"}},[t("div",{attrs:{id:"infos"}},[t("span",{attrs:{id:"info"}},[t("a",{attrs:{href:"/a/user/"+s.from_user_id}},[e._v("用户"+e._s(s.from_user_id))])]),e._v(" \n                                "),t("span",{attrs:{id:"info"}},[t("a",{attrs:{href:"/a/undefined/theme/"+s.theme_id}},[e._v("在主题"+e._s(s.theme_id)+"回复你")])]),e._v(" \n                                "),t("span",{attrs:{id:"info"}},[e._v(" "+e._s(s.created_at)+" ")]),e._v(" \n                                "),0==s.message_status?t("span",{attrs:{id:"messagenew"}},[e._v("新")]):e._e()]),t("div",{attrs:{id:"item-title"}},[t("a",{attrs:{href:"/a/undefined/theme/"+s.theme_id+"#comment",title:"theme.title"}},[e._v(" "+e._s(s.content)+" ")])])])])})),t("div",{attrs:{id:"aside"}}),t("gotop")],1)])])},r=[],i=(t("c5f6"),t("04ff"),t("db49")),n=(t("5f87"),t("0e1b")),o=t("c5d3"),d={name:"usermessage",components:{gotop:n["a"],mnav:o["a"]},data:function(){return{theme_list:"",messages:"",messages_count:"",signin_user:"",hourse_user:"",messages_unread_ids:""}},mounted:function(){var e=this;localStorage.getItem("signin_user")&&(this.signin_user=JSON.parse(localStorage.getItem("signin_user")));var s={user_id:Number.parseInt(this.$route.params.id)};fetch(i["a"]+"api/user/id/messages",{body:JSON.stringify(s),headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then(function(e){return e.json()}).then(function(s){e.messages=s.messages.reverse(),e.messages_count=s.messages_count,e.messages_unread_ids=s.messages_unread_ids,console.log(e.messages_unread_ids),console.log(e.messages_count)}).catch(function(e){console.log(e)}),fetch(i["a"]+"api/user_id",{body:JSON.stringify(s),headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then(function(e){return e.json()}).then(function(s){s.hourse_user.created_at=s.hourse_user.created_at.slice(0,10),""==s.hourse_user.avatar&&(s.hourse_user.avatar="https://www.gravatar.com/avatar/1"),e.hourse_user=s.hourse_user}).catch(function(e){console.log(e)})},methods:{readall:function(){var e={user_id:Number.parseInt(this.$route.params.id),messages_unread_ids:this.messages_unread_ids};fetch(i["a"]+"api/user/id/messages/readall",{body:JSON.stringify(e),headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then(function(e){return e.json()}).then(function(e){window.location.reload(!0)}).catch(function(e){console.log(e)})}}},u=d,c=(t("5b8b"),t("2877")),m=Object(c["a"])(u,a,r,!1,null,"22b2c835",null);m.options.__file="Message.vue";s["default"]=m.exports},d860:function(e,s,t){}}]);