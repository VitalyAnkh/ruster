(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4922"],{acad:function(e,t,n){"use strict";var i=n("d52c"),a=n.n(i);a.a},afec:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"theblog"}},[n("main",[n("div",{attrs:{id:"bcontainer"}},[n("div",{attrs:{id:"mei"}},[n("div",{attrs:{id:"title"}},[n("h1",[e._v(" "+e._s(e.theme.title)+" ")]),0==e.saveorno?n("span",{attrs:{id:"save"},on:{click:e.save}},[e._v("收藏")]):n("span",{attrs:{id:"saved"}},[e._v("已收藏")]),n("span",{attrs:{id:"like"}},[e._v("喜欢 "),n("span",{attrs:{id:"likeid"}},[e._v(e._s(e.like)+" ")])]),n("span",{attrs:{id:"right"}},[n("span",{staticClass:"first",attrs:{id:"info"}},[n("a",{attrs:{href:"/a/home/"+e.theme_category_name}},[e._v("博客")])]),e._v(" • \n                            "),n("span",{attrs:{id:"info"}},[n("a",{attrs:{href:"/a/user/"+e.theme_user.id}},[e._v(e._s(e.theme_user.username))])]),e._v(" •   \n                            "),n("span",{attrs:{id:"info"}},[e._v(e._s(e.theme_rtime))]),e.signin_user.username==e.theme_user.username?n("span",{attrs:{id:"info"}},[n("a",{attrs:{href:"/a/"+e.theme_category_name+"/edit/"+e.theme.id}},[e._v(" • 编辑")])]):e._e()])])]),n("div",{attrs:{id:"center"}},[n("div",{attrs:{id:"theme"}},[n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],attrs:{id:"content"},domProps:{innerHTML:e._s(e.theme.content)}})]),n("hr"),n("div",{attrs:{id:"comment"}},[n("div",{attrs:{id:"count"}},[e._v("评论   "+e._s(e.theme.comment_count)+" ")]),e._l(e.theme_comments,function(t,i){return n("div",{key:i},[n("div",{attrs:{id:"detail"}},[n("di",{attrs:{id:"avatar"}},[n("a",{attrs:{href:"/a/user/"+t.user.id}},[n("img",{attrs:{src:t.user.avatar}})])]),n("div",{attrs:{id:"comment_item"}},[n("div",{attrs:{id:"infos"}},[n("span",{attrs:{id:"info"}},[e._v(e._s(i+1)+" ")]),n("span",{attrs:{id:"info"}},[n("a",{attrs:{href:"/a/user/"+t.user_id}},[e._v(e._s(t.user.username))])]),e._v(" • \n                                    "),n("span",{attrs:{id:"info"}},[e._v(e._s(t.rtime))])]),n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],attrs:{id:"content"},domProps:{innerHTML:e._s(t.content)}})])],1)])})],2),n("hr"),e.signin_user?n("div",{attrs:{id:"reply"}},[e._m(0),n("div",{attrs:{id:"editor"}},[n("mavon-editor",{staticStyle:{height:"100%"},attrs:{name:"content",ishljs:!0,toolbars:e.set},model:{value:e.Content,callback:function(t){e.Content=t},expression:"Content"}})],1),n("button",{staticStyle:{"margin-top":"1vh",width:"66px","line-height":"25px","background-color":"#ffffff",border:"1px solid #a39c9c"},attrs:{type:"submit",id:"submit"},on:{click:e.comment}},[e._v("评论\n                    ")])]):n("div",{staticStyle:{margin:"10px"}},[e._v("请先登录再发表评论.\n                    "),n("a",{staticStyle:{"background-color":"aqua"},attrs:{href:"/a/signin"}},[e._v("登录")])])])])])])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"messagenote"}},[n("p",[n("strong",[e._v("注意:")]),e._v("发消息格式:["),n("strong",[e._v("@人名 内容")]),e._v("]中间有一空格,不然发不出去或收不到")])])}],r=(n("c5f6"),n("04ff"),n("cadf"),n("551c"),n("097d"),n("b2d8")),s=(n("64e1"),n("db49")),o={name:"theblog",components:{mavonEditor:r["mavonEditor"]},data:function(){return{Content:"",theme:"",theme_user:"",theme_category_name:"",theme_rtime:"",theme_comments:"",signin_user:"",like:"",saveorno:"",set:{bold:!0,italic:!0,header:!0,quote:!0,ul:!0,ol:!0,link:!0,code:!0,table:!0,trash:!0,fullscreen:!0,htmlcode:!0,preview:!0,help:!0,underline:!1,strikethrough:!1,mark:!1,alignleft:!1,aligncenter:!1,alignright:!1,superscript:!1,subscript:!1,undo:!1,redo:!1,imagelink:!1,readmodel:!1,save:!1,navigation:!1,subfield:!1}}},mounted:function(){var e=this;this.saveorno=!1;var t=this.$route.params.id;if(localStorage.getItem("signin_user")){this.signin_user=JSON.parse(localStorage.getItem("signin_user"));var n=JSON.parse(localStorage.getItem("signin_user")).id,i={theme_id:Number.parseInt(t),user_id:n};fetch(s["a"]+"api/blog/like",{body:JSON.stringify(i),headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then(function(e){return e.json()}).then(function(t){e.like=t.number,e.saveorno=t.saveorno}).catch(function(e){console.log(e)})}else{var a=0,r={theme_id:Number.parseInt(t),user_id:a};fetch(s["a"]+"api/blog/like",{body:JSON.stringify(r),headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then(function(e){return e.json()}).then(function(t){e.like=t.number,e.saveorno=t.saveorno}).catch(function(e){console.log(e)})}fetch(s["a"]+"api/theme/"+this.$route.params.id,{method:"GET"}).then(function(e){return e.json()}).then(function(t){e.theme=t.theme,e.theme_user=t.theme_user,e.theme_rtime=t.theme_rtime,e.theme_category_name=t.theme_category_name,t.theme_comments.map(function(e){""==e.user.avatar&&(e.user.avatar="https://www.gravatar.com/avatar/1")}),e.theme_comments=t.theme_comments}).catch(function(e){console.log(e)})},methods:{comment:function(){var e=this.Content,t=this.$route.params.id,n=JSON.parse(localStorage.getItem("signin_user")).id,i=this.theme_user.id,a={theme_id:Number.parseInt(t),theme_user_id:Number.parseInt(i),user_id:Number.parseInt(n),comment:e};""!=e?fetch(s["a"]+"api/theme/"+this.$route.params.id,{body:JSON.stringify(a),headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then(function(e){return e.json()}).then(function(e){window.location.reload(!0)}).catch(function(e){console.log(e)}):alert("评论内容不能为空")},save:function(){if(localStorage.getItem("signin_user")){var e=document.getElementById("save"),t=document.getElementById("likeid");e.style.color="green",e.innerHTML="已收藏",t.innerHTML=Number.parseInt(t.innerHTML)+1;var n=JSON.parse(localStorage.getItem("signin_user")).id,i=this.$route.params.id,a={user_id:Number.parseInt(n),theme_id:Number.parseInt(i)};fetch(s["a"]+"api/blog/save",{body:JSON.stringify(a),headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then(function(e){return e.json()}).then(function(e){window.location.reload(!0)}).catch(function(e){console.log(e)})}}}},c=o,m=(n("acad"),n("2877")),d=Object(m["a"])(c,i,a,!1,null,null,null);d.options.__file="Blog.vue";t["default"]=d.exports},d52c:function(e,t,n){}}]);